========================================
v2.5.4 动态GPIO同步 - 测试指南
========================================

✅ 新功能：自动添加/移除GPIO

========================================
测试准备
========================================

1. 打开 index-v2.5.4.html 在浏览器中测试
2. 或替换 index.html 后访问网站
3. 打开浏览器开发者工具（F12）
4. 查看Console标签的调试日志

========================================
测试1：自动添加新GPIO
========================================

步骤：
1. 连接ESP32设备
2. 记录当前显示的GPIO列表（例如：19, 21, 25）
3. 在ESP32 Web界面启用新GPIO（例如：GPIO 34）
4. 等待自动刷新（或手动点击刷新）

预期结果：
✓ 页面自动添加GPIO 34卡片
✓ 新卡片有滑入动画效果
✓ 可以立即控制GPIO 34
✓ 调试日志显示："添加1个新GPIO: 34"
✓ 调试日志显示："✓ 已添加GPIO 34 卡片"
✓ 无"找不到GPIO元素"错误

========================================
测试2：自动移除旧GPIO
========================================

步骤：
1. 连接ESP32设备
2. 记录当前显示的GPIO列表
3. 在ESP32 Web界面禁用某个GPIO（例如：GPIO 2）
4. 等待自动刷新（或手动点击刷新）

预期结果：
✓ 页面自动移除GPIO 2卡片
✓ 其他GPIO不受影响
✓ 调试日志显示："移除1个GPIO: 2"
✓ 页面无跳动

========================================
测试3：批量修改GPIO
========================================

步骤：
1. 连接ESP32设备
2. 在ESP32 Web界面同时：
   - 启用2个新GPIO（例如：34, 35）
   - 禁用1个旧GPIO（例如：2）
3. 等待自动刷新

预期结果：
✓ 页面添加GPIO 34和35
✓ 页面移除GPIO 2
✓ 其他GPIO正常更新
✓ 调试日志显示所有变化
✓ 页面无跳动

========================================
测试4：频繁修改测试
========================================

步骤：
1. 连接ESP32设备
2. 快速多次启用/禁用不同GPIO
3. 观察页面响应

预期结果：
✓ 页面快速同步所有变化
✓ 无卡顿现象
✓ 无错误信息
✓ 内存使用正常

========================================
测试5：自动刷新测试
========================================

步骤：
1. 连接ESP32设备
2. 启用自动刷新（间隔2秒）
3. 在ESP32端修改GPIO配置
4. 观察页面自动同步

预期结果：
✓ 2秒后自动检测到变化
✓ 自动添加/移除GPIO
✓ 页面无跳动
✓ 倒计时正常显示

========================================
调试日志检查
========================================

正常日志示例：
[时间] → 执行智能更新（动态同步GPIO列表）
[时间] 添加1个新GPIO: 34
[时间]   ✓ 已添加GPIO 34 卡片
[时间] 更新GPIO 19 DOM: ...
[时间] - GPIO 19 状态未变化，跳过更新

错误日志（不应出现）：
✗ 找不到GPIO X 的状态元素

========================================
性能检查
========================================

检查项：
□ 页面加载速度正常
□ 刷新响应快速
□ 无明显卡顿
□ 内存使用稳定
□ CPU使用合理

========================================
兼容性检查
========================================

浏览器：
□ Chrome - 正常
□ Firefox - 正常
□ Edge - 正常
□ Safari - 正常

设备：
□ 桌面端 - 正常
□ 移动端 - 正常
□ 平板 - 正常

========================================
问题排查
========================================

如果GPIO没有自动添加：
1. 检查调试日志是否有错误
2. 确认ESP32返回了新GPIO
3. 检查自动刷新是否启用
4. 尝试手动刷新

如果页面跳动：
1. 检查是否误触发完整渲染
2. 查看调试日志的"判断为"信息
3. 应该显示"后续刷新"而非"首次加载"

========================================
测试完成标准
========================================

✓ 所有测试用例通过
✓ 无控制台错误
✓ 调试日志正常
✓ 性能表现良好
✓ 兼容性测试通过

========================================
部署前检查
========================================

□ 本地测试完成
□ 所有功能正常
□ 无已知bug
□ 文档已更新
□ 准备替换index.html

========================================
